<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>时效总览</title>

    <link rel="stylesheet" type="text/css" href="../../dm/common.css">
    <link href="../../tools/bootstrap/css/buttons.css" rel="stylesheet">
    <link href="../../tools/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../tools/bootstrap/datatable/jquery.dataTables.min.css" rel="stylesheet">

    <script src="../../tools/jquery/jquery-2.1.3.min.js"></script>
    <script src="../../tools/bootstrap/js/bootstrap.min.js"></script>
    <script src="../../tools/bootstrap/datatable/jquery.dataTables.min.js"></script>
    <script src="../../tools/jquery/ZeroClipboard.js"></script>
    <script src="../../tools/echarts-2.0.4/echarts-plain-map.js"></script>
    <script src="../zk/CityLocation.js"></script>

    <script src="../../framework/core.js"></script>
    <script src="../../framework/ajax.js"></script>
    <script src="../../dm/common.js"></script>

    <script type="text/javascript">
    var globalValiable = window.parent.globalValiable,
        DayList = [],CenterList = [],CenterPList = [],CompanyList = [],
        TrendSeries = [0,0,0,0,0,0],Frist = false,Relate = [],
        MapShowMode = 1,MapType = false,DataType= true;

    window.onload = function() {
        var originData = globalValiable.data,
            queryParams = globalValiable.queryParams,
            trend = document.getElementById('TrendCanvas'),
            List = document.getElementById("CenterList"),
            List2 = document.getElementById("CenterList2"),
            MyMap = document.getElementById('AgingMap');
        trend.style.height = (screen.height - 265) + 'px';
        MyMap.style.height = (screen.height - 255) + 'px';

        if(queryParams.param3 == undefined){
            List.options.add(new Option('全网','全网'));
        }
        List2.options.add(new Option('请选择分拨','hehe'));
        for(var i = 0; i < originData.length; i++){
            var inday = originData[i]["inday"],
                center = originData[i]["send_center"],
                company = originData[i]["send_org"];

            if(!DayList.contains(inday)){
                DayList.push(inday);
            }
            if(!CompanyList.contains(company)){
                CompanyList.push(company);
                if(queryParams.param3 == undefined){
                    List.options.add(new Option(company,company));
                }
                else if(queryParams.param3.indexOf('公司') >= 0){
                     List.options.add(new Option(company,company));    
                }
            }
            if(!CenterList.contains(center)){
                var temp = {};
                temp.name = center;
                temp.parent = company;
                CenterList.push(center);
                CenterPList.push(temp);
                List.options.add(new Option(center,center));
                List2.options.add(new Option(center,center));
            }
        }

        if(queryParams.param3 != undefined){
            if(queryParams.param3.indexOf('分拨') >= 0){
                document.getElementById("btn1").disabled = true;
                document.getElementById("Tab3").disabled = true;
                document.getElementById("Tab4").disabled = true;
            }
        }
        $("#Tab1").click();
        $("#net").click();
        $("#op").click();  
    } 

    function Map(){
        var originData = globalValiable.data,
            selected = document.getElementById('CenterList2').value,
            data = [],Disp = [],geoCoord = CityLocation(),
            datar = [],dataroute = {};

        for(var i = 0; i < originData.length; i++){
            var center = originData[i]["send_center"],
                company = originData[i]["send_org"],
                dcenter = originData[i]["disp_center"],
                dcompany = originData[i]["disp_org"],
                name,dname;

            if(MapType){
                name = company;
                dname = dcompany;
            }
            else{
                name = center;
                dname = dcenter;
            }   
            if(name == selected){
                if(!Disp.contains(dname)){
                    data[dname] = {n:0,tn:0};
                    Disp.push(dname);
                }

                if(DataType){
                    data[dname].n += originData[i]["net_n"];
                    data[dname].tn += originData[i]["net_tn"];
                }
                else{
                    data[dname].n += originData[i]["cen_n"];
                    data[dname].tn += originData[i]["cen_tn"];
                }
            }
        }

        dataroute = [];
        for(var d in Disp){
            if((d != 'contains')&&(data[Disp[d]].tn > 0)){
                var temp = {},tr = Disp[d],
                    send = (selected.replace(/分拨/, "")).replace(/分公司/, ""),
                    disp = (Disp[d].replace(/分拨/, "")).replace(/分公司/, "");
                temp = [];
                var r = Math.round(data[tr].n/data[tr].tn*1000)/10;

                dataroute.push({name:disp,value:r});
                if(MapShowMode < 3){
                    temp.push({name:send});
                    temp.push({name:disp,value:r});
                    if((r > 0)||(MapShowMode == 2)){
                        datar.push(temp);
                    }
                }
            }
        }

        var series = [
        {
            name: '全国',
            type: 'map',
            roam: true,
            hoverable: false,
            mapType: 'china',
            itemStyle:{
                normal:{
                    borderColor:'rgba(0,0,0,1)',
                    borderWidth:1,
                    areaStyle:{
                        color: '#F1DEA3'
                    }
                }
            },
            data:[],
            markLine : {
                smooth:true,
                symbol: ['none', 'circle'],  
                symbolSize : 1,
                itemStyle : {
                    normal: {
                        color:'#fff',
                        borderWidth:1,
                        borderColor:'rgba(255,255,255,0.5)'
                    }
                },
                data : [],
            },
            geoCoord: geoCoord
        },
        {
            name: 'Aging',
            type: 'map',
            mapType: 'china',
            data:[],
            markLine : {
                smooth:true,
                effect : {
                    show: true,
                    scaleSize: 1,
                    period: 30,
                    color: '#fff',
                    shadowBlur: 10
                },
                itemStyle : {
                    normal: {
                        borderWidth:1,
                        lineStyle: {
                            type: 'solid',
                            shadowBlur: 10
                        }
                    }
                },
                data : datar
            },
            markPoint : {
                symbol:'emptyCircle',
                symbolSize : function (v){
                    return 11 - v/10;
                },
                effect : {
                    show: false,
                    shadowBlur : 0
                },
                itemStyle:{
                    normal:{
                        label:{show:false}
                    },
                    emphasis:{
                        label:{
                            textStyle:{fontSize:'20',fontFamily:'Microsoft YaHei'}
                        }
                    }
                },
                data : dataroute
            }
        }]
        if(MapShowMode == 3){
            series.push({
            name: 'Home',
            type: 'map',
            mapType: 'china',
            data:[],
            markPoint : {
                symbol:'image://./zk_images/flag.png',
                symbolSize:10,
                effect : {
                    show: false,
                    shadowBlur : 0
                },
                itemStyle:{
                    normal:{
                        label:{show:false}
                    },
                    emphasis:{
                        label:{show:false}
                    }
                },
                data : [{name:(selected.replace(/分拨/, "")).replace(/分公司/, ""),value:50}]
            }
        });
        }

        var myChart = echarts.init(document.getElementById('AgingMap'));
 
var option = {
    backgroundColor: '#F1DEA3',
    color: ['gold','aqua','lime'],
    tooltip : {
        trigger: 'item',
        formatter: function (v) {
            var str = '';
            if(v[0] == 'Aging'){
                if(v[1].indexOf('>')>0){
                    str = v[1].replace(':', ' →    ') + v[3] + '%';
                }
                else{
                    str = v[1] + ':' + v[2] + '%';
                }
            }
            else{
                str = v[1];
            }
            return str;
        }
    },
    dataRange: {
        min : 0,
        max : 100,
        calculable : true,
        color: ['#0067A6','#008972','yellow','#EFC028','orange', '#E82C0C','red'],
        textStyle:{color:'#000',fontFamily:'Microsoft YaHei'}
    },
    series : series
};         
        myChart.setOption(option);
    }

    function Trend(){
        var originData = globalValiable.data,
            Selected = document.getElementById("CenterList").value,
            data = [[],[],[],[],[],[]],
            SeriesName = ['客户时效','客户加一','运营时效','运营加一','交件准点','接件准点'],
            LineType = ['solid','dashed','solid','dashed','dotted','dotted'],
            LineColor = ['#337AB7','#337AB7','#008972','#008972','#F2572D','#A488A5'],
            datap = [],series = [],datalegend = [],
            min = 100,max = 0;

        for(var i = 0; i < originData.length; i++){
            var inday = originData[i]["inday"],
                center = originData[i]["send_center"],
                company = originData[i]["send_org"];

            if((Selected == '全网')||(Selected == center)||(Selected == company)){
                if(datap[inday] == null){
                    datap[inday] = {};
                    datap[inday].n = originData[i]["net_n"];
                    datap[inday].tn = originData[i]["net_tn"];
                    datap[inday].nadd = originData[i]["net_add"];
                    datap[inday].tadd = originData[i]["net_tadd"];
                    datap[inday].cn = originData[i]["cen_n"];
                    datap[inday].ctn = originData[i]["cen_tn"];
                    datap[inday].cnadd = originData[i]["cen_add"];
                    datap[inday].ctadd = originData[i]["cen_tadd"];
                    datap[inday].ipn = originData[i]["ipn"];
                    datap[inday].iptn = originData[i]["iptn"];
                    datap[inday].opn = originData[i]["opn"];
                    datap[inday].optn = originData[i]["optn"];
                }
                else{
                    datap[inday].n += originData[i]["net_n"];
                    datap[inday].tn += originData[i]["net_tn"];
                    datap[inday].nadd += originData[i]["net_add"];
                    datap[inday].tadd += originData[i]["net_tadd"];
                    datap[inday].cn += originData[i]["cen_n"];
                    datap[inday].ctn += originData[i]["cen_tn"];
                    datap[inday].cnadd += originData[i]["cen_add"];
                    datap[inday].ctadd += originData[i]["cen_tadd"];
                    datap[inday].ipn += originData[i]["ipn"];
                    datap[inday].iptn += originData[i]["iptn"];
                    datap[inday].opn += originData[i]["opn"];
                    datap[inday].optn += originData[i]["optn"];
                }
            }
        }

        for(var d in DayList){
            if(d != 'contains'){
                if(TrendSeries[0]){
                    if(datap[DayList[d]].tn == null){
                        data[0].push(datap[DayList[d]].tn);
                    }
                    else{
                        var r = Math.round(datap[DayList[d]].n/datap[DayList[d]].tn*1000)/10;
                        data[0].push(r);
                        if(r < min){min = r;}
                        if(r > max){max = r;}
                    }
                }
                if(TrendSeries[1]){
                    if(datap[DayList[d]].tadd == null){
                        data[1].push(datap[DayList[d]].tadd);
                    }
                    else{
                        var r = Math.round(datap[DayList[d]].nadd/datap[DayList[d]].tadd*1000)/10;
                        data[1].push(r);
                        if(r < min){min = r;}
                        if(r > max){max = r;}
                    }
                }
                if(TrendSeries[2]){
                    if(datap[DayList[d]].tn == null){
                        data[2].push(datap[DayList[d]].ctn);
                    }
                    else{
                        var r = Math.round(datap[DayList[d]].cn/datap[DayList[d]].ctn*1000)/10;
                        data[2].push(r);
                        if(r < min){min = r;}
                        if(r > max){max = r;}
                    }
                }
                if(TrendSeries[3]){
                    if(datap[DayList[d]].tn == null){
                        data[3].push(datap[DayList[d]].ctadd);
                    }
                    else{
                        var r = Math.round(datap[DayList[d]].cnadd/datap[DayList[d]].ctadd*1000)/10;
                        data[3].push(r);
                        if(r < min){min = r;}
                        if(r > max){max = r;}
                    }
                }
                if(TrendSeries[4]){
                    if(datap[DayList[d]].tn == null){
                        data[4].push(datap[DayList[d]].iptn);
                    }
                    else{
                        var r = Math.round(datap[DayList[d]].ipn/datap[DayList[d]].iptn*1000)/10;
                        data[4].push(r);
                        if(r < min){min = r;}
                        if(r > max){max = r;}
                    }
                }
                if(TrendSeries[5]){
                    if(datap[DayList[d]].tn == null){
                        data[5].push(datap[DayList[d]].optn);
                    }
                    else{
                        var r = Math.round(datap[DayList[d]].opn/datap[DayList[d]].optn*1000)/10;
                        data[5].push(r);
                        if(r < min){min = r;}
                        if(r > max){max = r;}
                    }
                }
            }
        }

        for(var i = 0; i < 6; i++){
            if(TrendSeries[i]){
                datalegend.push({name:SeriesName[i], textStyle:{normal:{color:'#999'}}});

                series.push({
                    name:SeriesName[i],
                    type:'line',
                    data:data[i],
                    symbol:'none',
                    itemStyle: {
                        normal: {
                            color:LineColor[i],
                            lineStyle: {   
                                type:LineType[i],
                                color:LineColor[i],
                                width: 3
                            }
                        }
                    }
                });
            }
        }

        min = Math.floor(min/10)*10;
        max = Math.ceil(max/10)*10;

        var myChart = echarts.init(document.getElementById('TrendCanvas'));
//////////////////////////////////////////////OPTION
var option = {
    legend: {
        x:'right',
        y:'20px',
        selectedMode:false,
        data:datalegend,
        textStyle:{
            fontFamily:'Microsoft YaHei',
            fontSize:'18',
            color:'#999',
        }
    },
    tooltip : {
        trigger: 'axis',
        axisPointer:{type : 'none'},
        textStyle:{fontSize:'16',color:'#fff',fontFamily:'Microsoft YaHei'},
        formatter:function(d){
            var l = d.length,
                result = d[0][1];

            for(var i = 0;i < d.length;i++){
                if(d[i][2] != '-'){
                    result += '<br/>' + d[i][0] + ':' + d[i][2] + '%';
                }
                else{
                    result += '<br/>' + d[i][0] + ':' + '-';
                }
            }

            return result;
        }
    },
    calculable : true,
    xAxis : [
        {
            type : 'category',
            axisLine:{lineStyle:{color:'#999'}},
            boundaryGap : false,
            axisLabel:{
                rotate:-30,
                interval:0,
                textStyle:{color:'#999',fontSize:'16'}
            },
            data : DayList
        }
    ],
    yAxis : [
        {
            name:'百分比',
            nameTextStyle:{
                fontSize:'18',
                fontFamily:'Microsoft YaHei'
            },
            type : 'value',
            axisLine:{lineStyle:{color:'#999'}},
            axisLabel:{textStyle:{color:'#999',fontSize:'16'}},
            min:min,
            max:max
        }
    ],
    series : series
};            
        myChart.setOption(option);
    }

    function MapSet(v){
        if(v == 1){
            var b = document.getElementById('btn1'),
                List = document.getElementById('CenterList2');
            if(MapType){
                MapType = false;
                b.innerHTML= '<span class="glyphicon glyphicon-refresh"></span>分拨模式';
                List.innerHTML = '';
                for(var c in CenterList){
                    if(c != 'contains'){
                        List.options.add(new Option(CenterList[c],CenterList[c]));
                    }
                }
            }
            else{
                MapType = true;
                b.innerHTML= '<span class="glyphicon glyphicon-refresh"></span>省份模式';
                List.innerHTML = '';
                for(var c in CompanyList){
                    if(c != 'contains'){
                        List.options.add(new Option(CompanyList[c],CompanyList[c]));
                    }
                }
            }
        }
        else if(v ==2){
            var b = document.getElementById('btn2');
            if(DataType){
                DataType = false;
                b.innerHTML= '<span class="glyphicon glyphicon-refresh"></span>运营时效';
            }
            else{
                DataType = true;
                b.innerHTML= '<span class="glyphicon glyphicon-refresh"></span>客户时效';
            }
        }
        else{
            var b = document.getElementById('btn3');
            if(MapShowMode == 1){
                MapShowMode = 2;
                b.innerHTML= '<span class="glyphicon glyphicon-refresh"></span>显示全部路线';
            }
            else if(MapShowMode == 2){
                MapShowMode = 3;
                b.innerHTML = '<span class="glyphicon glyphicon-refresh"></span>隐藏全部路线';
            }
            else{
                MapShowMode = 1;
                b.innerHTML = '<span class="glyphicon glyphicon-refresh"></span>显示部分路线';
            }
        }
        Map();
    }

    function Rate(n,tn){
        if((tn != null)||(tn == 0)){
            return Math.round(n/tn*1000)/10 + '%';
        }
        else{
            return '';
        }
    }

    function Repainting(v){
        TrendSeries[v] = Math.abs(TrendSeries[v] - 1);
        if(Frist){
            Trend();
        }
        else{
            Frist = true;
        }
    }

    Array.prototype.contains = function(obj) {  
        var i = this.length;  
        while (i--) {  
            if (this[i] === obj) {  
                return true;  
            }  
        }  
        return false;  
    }  
    </script>

    <style type="text/css">
        img {max-height: 100%;}
        dt {font-family:Microsoft YaHei;font-size:20px;}
        dd {font-family:Microsoft YaHei;font-size:16px;text-indent:30px}
        li {font-family:Microsoft YaHei;}
        th {
            color:#999;
            font-family:Microsoft YaHei;
            font-style:normal;
        }
        td{font-family:Microsoft YaHei;}
        span {width:16px;height:16px;}
        .modal-title{font-family:Microsoft YaHei;color:#337AB7;}
        .panel-heading {font-family:Microsoft YaHei;}
        .table-hover{margin-top: 15px;}
        .btn {font-family:Microsoft YaHei;}
        .copybtn {
            font-family:Microsoft YaHei;
            width:140px;
            margin-top: 3px;
        }
        .Tab {font-family:Microsoft YaHei;}
        #CenterList {
            font-family:Microsoft YaHei;
            font-size:18px;
            float:right;
            padding:2px;
            color:#999;
            border-color:#fff;
            text-align:right;
            margin-top: 12px;
        }
        #CenterList2 {
            font-family:Microsoft YaHei;
            font-size:16px;
            float:right;
            padding:3px;
            color:#000;
            border-color:#F1DEA3;
            background-color:#F1DEA3;
            text-align:right;
            margin-top: 1px;
        }
        .mb{height: 32px;}
        .navcustom{
            font-family:Microsoft YaHei;
            text-align: center;
            color:#337AB7;
            width: 140px;
            margin-top: 5px;
            margin-left: 15px;
            border-radius: 4px;
            border: 1px solid #ddd;
            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.067);
        }
/*//////////////////////////////////////Bootstrap Style*/
        .navcustom li{
            margin: 0;
            border-top: 1px solid #ddd;
        }
        .navcustom li:first-child{
            border-top: none;
        }
        .navcustom li a{
            margin: 0;
            padding: 8px 16px;
            border-radius: 0;
        }
        .navcustom li.active a, ul.nav-tabs li.active a:hover{
            color: #fff;
            background: #0088cc;
            border: 1px solid #0088cc;
        }
        .navcustom li:first-child a{
            border-radius: 4px 4px 0 0;
        }
        .navcustom li:last-child a{
            border-radius: 0 0 4px 4px;
        }
        .navcustom.affix{
            top: 30px; /* Set the top position of pinned element */
        }
    </style>
</head>

<body>
<ul id="myTab" class="nav nav-tabs">
    <li class="Tab"><a id='Tab1' href="#TabCanvas" data-toggle="tab">走势图</a></li>
    <li class="Tab"><a id="Tab2" href="#TabMap" data-toggle="tab">地图</a></li>
    <li class="Tab dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            说明书<b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
           <li><a data-toggle="modal" href="#notice1">客户时效</a></li>
           <li class="divider"></li>
           <li><a data-toggle="modal" href="#notice2">运营时效</a></li>
           <li class="divider"></li>
           <li><a data-toggle="modal" href="#notice3">交接件离港</a></li>
        </ul>
    </li>
</ul>

<div id="myTabContent" class="tab-content">
    <div class="tab-pane fade in active" id="TabCanvas">
        <div class="btn-group" data-toggle="buttons" style="padding:5px;">
            <label class="btn btn-primary" id='net' onclick=Repainting(0)>客户时效</label>
            <label class="btn btn-primary" onclick=Repainting(1)>客户加一</label>
            <label class="btn btn-primary" id='op' onclick=Repainting(2)>运营时效</label>
            <label class="btn btn-primary" onclick=Repainting(3)>运营加一</label>
            <label class="btn btn-primary" onclick=Repainting(4)>交件准点</label>
            <label class="btn btn-primary" onclick=Repainting(5)>接件准点</label>
        </div> 
        <select id="CenterList" onchange="Trend()">
        </select>&nbsp;
        <div id='TrendCanvas' style="height:640px;"></div>
    </div>
    <div class="tab-pane fade" id="TabMap" style="background:#F1DEA3">
        <button type="button" id="btn1" onclick="MapSet(1)" class="btn btn-primary mb">
            <span class="glyphicon glyphicon-refresh"></span>分拨模式
        </button>
        <button type="button" id="btn2" onclick="MapSet(2)" class="btn btn-primary mb">
            <span class="glyphicon glyphicon-refresh"></span>客户时效
        </button>
        <button type="button" id="btn3" onclick="MapSet(3)" class="btn btn-primary mb">
            <span class="glyphicon glyphicon-refresh"></span>显示部分路线
        </button>
        <select id="CenterList2" onchange="Map()"></select>
        <div id="AgingMap" style="height:640px;"></div>
    </div>
    <div class="modal fade" id="notice1" tabindex="-1" role="dialog" 
       aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" 
                    data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                    客户时效说明
                    </h4>
                </div>
                <div class="modal-body">
                <dl>
                    <dt>取值逻辑</dt>
                    <dd>1 获取查询日期及之前一段时间的所有单号</dd>
                    <dd>2 根据单号提供的发件站点和签收站点信息，查询规定时效表确定该单应签收的时间</dd>
                    <dd>3 筛选应到达时间落在查询时间之内的单号</dd>
                    <dd>4 查找该单号的签收时间，与应签收时间对比，若超出范围，这认为时效未达成</dd>
                    <dt>时间节点</dt>
                    <dd>- 查询起始日期8:00至查询结束日期次日8:00</dd>
                    <dt>注意事项</dt>
                    <dd>- 汇总表、明细表中的数据以出发分拨或分公司为归集主体</dd>
                    <dd>- 数据实时更新，查询当日或前一日数据由于部分数据不全会偏高</dd>
                </dl>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" 
                    data-dismiss="modal">     
                    我知道了
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="notice2" tabindex="-2" role="dialog" 
       aria-labelledby="myModalLabel2" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" 
                    data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel2">
                    运营时效说明
                    </h4>
                </div>
                <div class="modal-body">
                <dl>
                    <dt>取值逻辑</dt>
                    <dd>1 获取查询日期及之前一段时间的所有单号</dd>
                    <dd>2 根据单号提供的发件站点和签收站点信息，查询规定时效表确定该单在目的分拨的应达到时间</dd>
                    <dd>3 筛选应到达时间落在查询时间之内的单号</dd>
                    <dd>4 查找该单号在目的分拨扫描时间，与应到达时间对比，若超出范围，这认为时效未达成</dd>
                    <dt>时间节点</dt>
                    <dd>- 查询起始日期8:00至查询结束日期次日8:00</dd>
                    <dt>注意事项</dt>
                    <dd>- 汇总表、明细表中的数据以出发分拨或分公司为归集主体</dd>
                    <dd>- 带有方向性的运营时效数据请参见运营时效树状矢量表</dd>
                    <dd>- 具体各单号运营时效详细数据请参见运营时效明细表</dd>
                    <dd>- 数据实时更新，查询当日或前一日数据由于部分数据不全会偏高</dd>
                </dl>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" 
                    data-dismiss="modal">     
                    我知道了
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="notice3" tabindex="-3" role="dialog" 
       aria-labelledby="myModalLabel3" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" 
                    data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel3">
                    交接件准点率说明
                    </h4>
                </div>
                <div class="modal-body">
                <dl>
                    <dt>取值逻辑</dt>
                    <dd>1 获取查询日期及之前一段时间的分拨的班车扫描记录</dd>
                    <dd>2 根据单号提供的交/接站点和分拨信息，查询站点交接件时效表确定该班车应交/接件时间</dd>
                    <dd>3 筛选应交/接件时间落在查询时间之内的所有班车记录</dd>
                    <dd>4 查找该班车的打卡时间，与应交/接件时间对比，若超出范围，这认为该次交/接件未达成</dd>
                    <dt>时间节点</dt>
                    <dd>- 查询起始日期14:30至查询结束日期次日14:30</dd>
                    <dt>注意事项</dt>
                    <dd>- 汇总表、明细表中的数据以班车打卡所在分拨为归集主体</dd>
                    <dd>- 数据实时更新，查询当日或前一日数据由于部分数据不全会偏高</dd>
                </dl>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" 
                    data-dismiss="modal">     
                    我知道了
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>