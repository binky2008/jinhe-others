<!DOCTYPE html>
<html>
<head>
   <meta charset="UTF-8" />
   <title>班车及时率</title>

   <link href="../../tools/bootstrap/css/bootstrap.css" rel="stylesheet">
   <script src="../../tools/jquery/jquery-2.1.3.min.js"></script>
   <script src="../../tools/bootstrap/js/bootstrap.min.js"></script>
   <script src="../../tools/jquery/ZeroClipboard.js"></script>

   <script src="../../framework/core.js"></script>
   <script src="../../framework/ajax.js"></script>
   <script src="../../dm/common.js"></script>

   <script src="../../tools/echarts-2.0.4/echarts-plain.js"></script>

   <script type="text/javascript">
   var globalValiable,
      Type = 1,Type2 = 1;

///////////////////////////用于查找目标是否存在于数组
   Array.prototype.contains = function(obj) {  
      var i = this.length;  
      while (i--) {  
         if (this[i] === obj) {  
            return true;  
         }  
      }  
      return false;  
   }  

///////////////////////////填充起末时间中间的日期
    function DayTrans(day){
        var res = day.getYear() + 1900 + '/';

        if(day.getMonth() < 11){
            res += '0';
        }
        res += day.getMonth() + 1 + '/' ;

        if(day.getDate() < 10){
            res += '0';
        }
        res += day.getDate();
        return res;
    }

   window.onload = function(){
//////////////////////////调整画布高度
      var   trend = document.getElementById('TrendCanvas');
      trend.style.height = (screen.height - 265) + 'px';

      globalValiable = window.parent.globalValiable;

////////////////////////////下拉框选项填充
      var originData = globalValiable.data,
         queryParams = globalValiable.queryParams,
         CenterList = [],
         CompanyList = [],
         List = document.getElementById("CenterSelect");

      if(queryParams.param3 == '-1'){     
         List.options.add(new Option('全网','全网'));
      }

      for(var i = 0; i < originData.length; i++){
         var c = originData[i]["company"],
            n = originData[i]["name"];

         if((!CompanyList.contains(c))&&(queryParams.param4 == '-1')){
            CompanyList.push(c);
            List.options.add(new Option(c,c));
         }

         if(!CenterList.contains(n)){
            CenterList.push(n);
            List.options.add(new Option(n,n));
         }
      }

      $("#Tab1").click();
      $("#send").click();
      Painting();
      TableDetail();
      TableSummary();
   } 

   function Painting(){
      var originData = globalValiable.data,
         queryParams = globalValiable.queryParams,
         DayList = [],
         data = [],
         matrix = [],
         matrix2 = [],
         series = [],
         min = 100,
         max = 0,
         Selected = document.getElementById("CenterSelect").value;

////////////////////////////把起始结束时间填充完整
      var StratDay = new Date(queryParams.param1),
         EndDay = new Date(queryParams.param2);
      DayList.push(DayTrans(StratDay));
      while(StratDay < EndDay){
         StratDay = new Date(StratDay.setDate(StratDay.getDate() + 1));
         DayList.push(DayTrans(StratDay));
      }

////////////////////////////////////数据部分
      for(var d in DayList){
         if(d != 'contains'){
            matrix[DayList[d]] = 0;
            matrix2[DayList[d]] = 0;
         }
      }

      for(var i = 0; i < originData.length; i++){
         var c = originData[i]["company"],
            n = originData[i]["name"],
            d = originData[i]["inday"];

         if((Selected == '全网')||(Selected == c)||(Selected == n)){
            if(Type == 1){
               matrix[d] += originData[i]["send"];
            }
            else if(Type == 2){
               matrix[d] += originData[i]["reach"];
            }
            else if(Type == 3){
               matrix[d] += originData[i]["run"];
            }
            else if(Type == 4){
               matrix[d] += originData[i]["e10"];
            }
            else if(Type == 5){
               matrix[d] += originData[i]["e20"];
            }
            else if(Type == 6){
               matrix[d] += originData[i]["d10"];
            }
            else{
               matrix[d] += originData[i]["d20"];
            }
            matrix2[d] += originData[i]["n"];
         }
      }

      for(var d in DayList){
         if(d != 'contains'){
            var r = Math.round(matrix[DayList[d]]/matrix2[DayList[d]]*1000)/10;
            data.push(r);

            if(r > max){
               max = r;
            }
            if(r < min){
               min = r;
            }
         }
      }

      max = Math.ceil(max/10)*10;
      min = Math.floor(min/10)*10;

/////////////////////////////////添加系列
   var name;
   if(Type == 1){
      name = '发车及时率';
   }
   else if(Type == 2){
      name = '到达及时率';
   }
   else if(Type == 3){
      name = '运行及时率';
   }
   else if(Type == 4){
      name = '提前发车10分钟以上比率';
   }
   else if(Type == 5){
      name = '提前发车20分钟以上比率';
   }
   else if(Type == 6){
      name = '延迟发车0~10分钟比率';
   }
   else{
      name = '延迟发车10分钟以上比率';
   }

   series.push({
   name:name,
   type:'line',
   smooth:true,
   data:data,
   symbol:'none',
   itemStyle: {
      normal: {
         lineStyle: {        // 系列级个性化折线样式
            width: 3,
            color:'#337AB7'
         }
     }
   }
   });

/////////////////////////////////画图部分
      var myChart = echarts.init(document.getElementById('TrendCanvas'));

var option = {
    tooltip : {
        trigger: 'axis',
        axisPointer:{type : 'none'},
        textStyle:{fontSize:'16',color:'#fff',fontFamily:'Microsoft YaHei'},
        formatter:function(d){
            var l = d.length,
                result = d[0][1];

            for(var i = 0;i < d.length;i++){
                if(d[i][2] != '-'){
                    result += '<br/>' + d[i][0] + ':' + d[i][2] + '%';
                }
                else{
                    result += '<br/>' + d[i][0] + ':' + '-';
                }
            }

            return result;
        }
    },
    calculable : true,
    xAxis : [
        {
            type : 'category',
            axisLine:{lineStyle:{color:'#999'}},
            boundaryGap : false,
            axisLabel:{
                rotate:-30,
                interval:0,
                textStyle:{color:'#999',fontSize:'16'}
            },
            data : DayList
        }
    ],
    yAxis : [
        {
            name:'百分比',
            nameTextStyle:{
                fontSize:'16',
                fontFamily:'Microsoft YaHei'
            },
            type : 'value',
            axisLine:{lineStyle:{color:'#999'}},
            axisLabel:{textStyle:{color:'#999',fontSize:'16'}},
            min:min,
            max:max
        }
    ],
    series : series
};            
       myChart.setOption(option);
    }

    function Repainting(type,t){
      if(t == 1){
        if(Type != type){
           Type = type;
           Painting();
        }
      }
      else{
        if(Type2 != type){
           Type2 = type;
           TableDetail();
        }
      }
    }

   function TableSummary(){
      var originData = globalValiable.data,
         data = {},
         data2 = {},
         datasorted = {},
         CenterList = [],
         CompanyList = []
         net_ot = 0,net_r = 0,net_s = 0,net_t = 0;

      data = [];
      data2 = [];
      for(var i = 0; i < originData.length; i++){
        var company = originData[i]["company"],
          center = originData[i]["name"];

        if(!CompanyList.contains(company)){
          CompanyList.push(company);
          data2[company] = {};
          data2[company].company = company;
          data2[company].ontime = 0;
          data2[company].reach = 0;
          data2[company].send = 0;
          data2[company].total = 0;
          data2.length++;
        }

        if(!CenterList.contains(center)){
          CenterList.push(center);   
          data[center] = {};
          data[center].center = center;
          data[center].company = company;
          data[center].send = 0;
          data[center].total = 0;
          data[center].reach = 0;
          data[center].ontime = 0;
          data.length++;
        }

        data[center].send += originData[i]["send"];
        data[center].total += originData[i]["n"];
        data[center].reach += originData[i]["reach"];
        data[center].ontime += originData[i]["run"];

        data2[company].send += originData[i]["send"];
        data2[company].total += originData[i]["n"];
        data2[company].reach += originData[i]["reach"];
        data2[company].ontime += originData[i]["run"];

        net_s+= originData[i]["send"];
        net_t += originData[i]["n"];
        net_r += originData[i]["reach"];
        net_ot += originData[i]["run"];
      }

//////////////////////////////////排序
      datasorted = [];
      var i = 0;
        cl = [];
      while(i < data.length){
        var min = 1,  
          ct;

        for(var c in CenterList){
          if((c != 'contains')&&(!cl.contains(CenterList[c]))){
            var  rate = data[CenterList[c]].send/data[CenterList[c]].total;
            if(rate <= min){          
              min = rate;
              ct = CenterList[c];
            }
          }
        }

        cl.push(ct);
        datasorted.push(data[ct]);
        i++;
      }

/////////////////////////////////制表
      var table = document.getElementById("tablesummary"),
        deal = [];

        var tr = table.insertRow();
        var td1 = tr.insertCell(0);  
        td1.innerText = '全网';
        td1.style.color = '#337AB7';
        var td2 = tr.insertCell(1);  
        td2.innerText = net_t;
        td2.style.color = '#337AB7';
        var td3 = tr.insertCell(2);  
        td3.innerText = net_t-net_s;
        td3.style.color = '#337AB7';
        var td4 = tr.insertCell(3);  
        td4.innerText = Math.round(net_s/net_t*1000)/10+'%';
        td4.style.color = '#337AB7';
        var td5 = tr.insertCell(4);  
        td5.innerText = net_t-net_r;
        td5.style.color = '#337AB7';
        var td6 = tr.insertCell(5);  
        td6.innerText = Math.round(net_r/net_t*1000)/10+'%';
        td6.style.color = '#337AB7';
        var td7 = tr.insertCell(6);  
        td7.innerText = net_t-net_ot;
        td7.style.color = '#337AB7';
        var td8 = tr.insertCell(7);  
        td8.innerText = Math.round(net_ot/net_t*1000)/10+'%';
        td8.style.color = '#337AB7';

      for(var k = 0; k < CompanyList.length; k++){
        var c = CompanyList[k];
        if(!deal.contains(c)){
          deal.push(c);

          var tr = table.insertRow();
          var td1 = tr.insertCell(0);  
          td1.innerText = data2[c].company;
          td1.style.color = '#337AB7';
          td1.id = c;
          var td2 = tr.insertCell(1);  
          td2.innerText = data2[c].total;
          td2.style.color = '#337AB7';
          var td3 = tr.insertCell(2);  
          td3.innerText = data2[c].total - data2[c].send;
          td3.style.color = '#337AB7';
          var td4 = tr.insertCell(3);  
          td4.innerText = Math.round(data2[c].send/data2[c].total*1000)/10+'%';
          td4.style.color = '#337AB7';
          var td5 = tr.insertCell(4);  
          td5.innerText = data2[c].total - data2[c].reach;
          td5.style.color = '#337AB7';
          var td6 = tr.insertCell(5);  
          td6.innerText = Math.round(data2[c].reach/data2[c].total*1000)/10+'%';
          td6.style.color = '#337AB7';
          var td7 = tr.insertCell(6);  
          td7.innerText = data2[c].total - data2[c].ontime;
          td7.style.color = '#337AB7';
          var td8 = tr.insertCell(7);  
          td8.innerText = Math.round(data2[c].ontime/data2[c].total*1000)/10+'%';
          td8.style.color = '#337AB7';

          for(var i = 0; i < CenterList.length; i++){
            if(datasorted[i].company == c){
              var tr = table.insertRow();
              var td1 = tr.insertCell(0);  
              td1.innerText = datasorted[i].center;
              var td2 = tr.insertCell(1);  
              td2.innerText = datasorted[i].total;
              var td3 = tr.insertCell(2);  
              td3.innerText = datasorted[i].total - datasorted[i].send;
              var td4 = tr.insertCell(3);  
              td4.innerText = Math.round(datasorted[i].send/datasorted[i].total*1000)/10+'%';
              var td5 = tr.insertCell(4);  
              td5.innerText = datasorted[i].total - datasorted[i].reach;
              var td6 = tr.insertCell(5);  
              td6.innerText = Math.round(datasorted[i].reach/datasorted[i].total*1000)/10+'%';
              var td7 = tr.insertCell(6);  
              td7.innerText = datasorted[i].total - datasorted[i].ontime;
              var td8 = tr.insertCell(7);  
              td8.innerText = Math.round(datasorted[i].ontime/datasorted[i].total*1000)/10+'%';
            }
          }
/////////////////////////////////添加导航栏
          var nav = document.getElementById("nav");
          nav.innerHTML = nav.innerHTML + '<li class="active"><a href="#'
          + c + '">' + c + '</a></li>';
        }
      }
      var nav = document.getElementById("nav");
        nav.innerHTML = nav.innerHTML + '<li class="active"><a href="#Table">回到顶部↑</a></li>';
   }

  function TableDetail(){
    var originData = globalValiable.data,
      queryParams = globalValiable.queryParams,
      data = {},
      data2 = {},
      datasorted = {},
      datatemp = {},
      DayList = [],
      CenterList = [],
      CompanyList = [],
      CenComList = [],
      Day = [],
      no = 1;

  var table = document.getElementById("tabledetail");
  table.innerHTML = '';
////////////////////////////把起始结束时间填充完整
    var StratDay = new Date(queryParams.param1),
       EndDay = new Date(queryParams.param2);
    DayList.push(DayTrans(StratDay));
    while(StratDay < EndDay){
       StratDay = new Date(StratDay.setDate(StratDay.getDate() + 1));
       DayList.push(DayTrans(StratDay));
    }

////////////////////////////数据部分
    data = [];
    data2 = [];
    datatemp = [];
    for(var i = 0; i < originData.length; i++){
      var centerday = originData[i]["name"] + originData[i]["inday"],
        companyday = originData[i]["company"] + originData[i]["inday"],
        center = originData[i]["name"],
        company = originData[i]["company"],
        inday = originData[i]["inday"];

      if(!CenterList.contains(center)){
        CenterList.push(center);
        CenComList[center] = company;
      }
      if(!CompanyList.contains(company)){
        CompanyList.push(company);
      }

      if(Day[inday] == null){
        Day[inday] = {};
        Day[inday].n = 0;
        Day[inday].tn = 0;
      }

      data[centerday] = {};
      data[centerday].company = originData[i]["company"];

      if(data2[companyday] == null){
        data2[companyday] = {};
        data2[companyday].n = 0;
        data2[companyday].tn = 0;
      }

      if(datatemp[center] == null){
        datatemp[center] = {};
        datatemp[center].n = 0;
        datatemp[center].tn = 0;
        datatemp[center].center = center;
        datatemp.length++;
      }

      if(Type2 == 1){
        data[centerday].n = originData[i]["send"];
        data[centerday].tn = originData[i]["n"];
        data2[companyday].n += originData[i]["send"];
        data2[companyday].tn += originData[i]["n"];
        Day[inday].n += originData[i]["send"];
        Day[inday].tn += originData[i]["n"];
        datatemp[center].n += originData[i]["send"];
        datatemp[center].tn += originData[i]["n"];
      }
      else if(Type2 == 2){
        data[centerday].n = originData[i]["reach"];
        data[centerday].tn = originData[i]["n"];
        data2[companyday].n += originData[i]["reach"];
        data2[companyday].tn += originData[i]["n"];
        Day[inday].n += originData[i]["reach"];
        Day[inday].tn += originData[i]["n"];
        datatemp[center].n += originData[i]["reach"];
        datatemp[center].tn += originData[i]["n"];
      }
      else{
        data[centerday].n = originData[i]["run"];
        data[centerday].tn = originData[i]["n"];
        data2[companyday].n += originData[i]["run"];
        data2[companyday].tn += originData[i]["n"];
        Day[inday].n += originData[i]["run"];
        Day[inday].tn += originData[i]["n"];
        datatemp[center].n += originData[i]["run"];
        datatemp[center].tn += originData[i]["n"];
      }

      data.length++;
    }

//////////////////////////////////排序
      datasorted = [];
      var i = 0;
        cl = [];
      while(i < datatemp.length){
        var min = 1,  
          ct;

        for(var c in CenterList){
          if((c != 'contains')&&(!cl.contains(CenterList[c]))){
            var  rate = datatemp[CenterList[c]].n/datatemp[CenterList[c]].tn;
            if(rate <= min){          
              min = rate;
              ct = CenterList[c];
            }
          }
        }

        cl.push(ct);
        datasorted.push(datatemp[ct]);
        i++;
      }

////////////////////////////制表
    var table = document.getElementById("tabledetail");
    var h = table.createTHead().insertRow();

    var td = h.insertCell(0);  
    td.innerText = '名称';
    td.style.color = '#999';
    td.style.fontFamily = 'Microsoft YaHei';

    for(var i = 0; i < DayList.length; i++){
      var td = h.insertCell(i+1);  
      td.innerText = DayList[i].substr(DayList[i].indexOf('/') + 1);
      td.style.color = '#999';
      td.style.fontFamily = 'Microsoft YaHei';
    }

    var td = h.insertCell(DayList.length + 1);  
    td.innerText = '累计';
    td.style.color = '#999';
    td.style.fontFamily = 'Microsoft YaHei';

    if(queryParams.param3 == undefined){
      var tr = table.insertRow();
      var td = tr.insertCell(0); 
      td.innerText = '全网';
      td.style.color = '#337AB7';
      var n = 0,tn = 0;
      for(var i = 0; i < DayList.length; i++){
        var td = tr.insertCell(i + 1),
          cd = DayList[i];
          
        if(Day[cd] == undefined){
          td.innerText = '';
        }
        else{
          td.innerText = Math.round(Day[cd].n/Day[cd].tn*1000)/10 + '%';
          td.style.color = '#337AB7';
          n += Day[cd].n;
          tn += Day[cd].tn
        }
      }
      var td = tr.insertCell(DayList.length + 1); 
      td.innerText = Math.round(n/tn*1000)/10 + '%';
      td.style.color = '#337AB7';
    }

    for(var com in CompanyList){
      if(com != 'contains'){
        var tr = table.insertRow();
        var td = tr.insertCell(0);  
        td.innerText = CompanyList[com].replace('分公司','');
        td.style.color = '#337AB7';
        td.id = CompanyList[com];
        var n = 0,tn = 0;
        for(var i = 0; i < DayList.length; i++){
          var td = tr.insertCell(i + 1);  
          var cd = CompanyList[com] + DayList[i];
            
          if(data2[cd] == undefined){
            td.innerText = '';
          }
          else{
            td.innerText = Math.round(data2[cd].n/data2[cd].tn*1000)/10 + '%';
            td.style.color = '#337AB7';
            n += data2[cd].n;
            tn += data2[cd].tn
          }
        }
        var td = tr.insertCell(DayList.length + 1); 
        td.innerText = Math.round(n/tn*1000)/10 + '%';
        td.style.color = '#337AB7';

        for(var k = 0; k < datasorted.length; k++){
          var cen = datasorted[k].center;
          if(CenComList[cen] == CompanyList[com]){
            var n = 0,tn = 0;
            var tr = table.insertRow();
            var td = tr.insertCell(0);  
            td.innerText = cen.replace('分拨','');
            for(var i = 0; i < DayList.length; i++){
              var td = tr.insertCell(i + 1);  
              var cd = cen + DayList[i];
              
              if(data[cd] == undefined){
                td.innerText = '';
              }
              else{
                td.innerText = Math.round(data[cd].n/data[cd].tn*1000)/10 + '%';
                n += data[cd].n;
                tn += data[cd].tn
              }

              if(i == DayList.length - 1){
                var td = tr.insertCell(DayList.length + 1); 
                td.innerText = Math.round(n/tn*1000)/10 + '%';
              }
            }            
          }
        }
      }
    }

    var tr = table.insertRow();
    for(var i = 0; i <= DayList.length + 1; i++){
      var td = tr.insertCell(i); 
      td.innerText = '.........................';
      td.style.color = '#fff';
    }
  }

  function MyScreen(TableId,ButtonId) {
    var clip = new ZeroClipboard.Client(); 
      txt = document.getElementById(TableId).innerText;

    clip.glue(ButtonId); 
    clip.setHandCursor(true); 
    clip.setText(txt); 
  }
   </script>

   <style type="text/css">
      dt {font-family:Microsoft YaHei;font-size:20px;}
      dd {font-family:Microsoft YaHei;font-size:16px;text-indent:30px}
      th {
        color:#999;
        font-family:Microsoft YaHei;
        font-style:normal;
      }
      td{
        font-family:Microsoft YaHei;
      }
      .btn {font-family:Microsoft YaHei;}
      .Tab {font-family:Microsoft YaHei;}
      #CenterSelect {
       font-family:Microsoft YaHei;
       font-size:18px;
       float:right;
       padding:8px;
       color:#999;
       border-color:#fff;
       text-align:right;
      }
      #CBtn{
        margin-top: 20px;
        width: 140px;
        margin-right: 15px;
        float:right;
      }
      #CBtn2{
        width: 140px;
        margin-left: 15px;
        margin-top: 20px;
      }
/* Custom Styles */
    .navcustom{
        font-family:Microsoft YaHei;
        text-align: center;
        color:#337AB7;
        width: 140px;
        margin-top: 5px;
        margin-left: 15px;
        border-radius: 4px;
        border: 1px solid #ddd;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.067);
    }
    .navcustom li{
        margin: 0;
        border-top: 1px solid #ddd;
    }
    .navcustom li:first-child{
        border-top: none;
    }
    .navcustom li a{
        margin: 0;
        padding: 8px 16px;
        border-radius: 0;
    }
    .navcustom li.active a, ul.nav-tabs li.active a:hover{
        color: #fff;
        background: #0088cc;
        border: 1px solid #0088cc;
    }
    .navcustom li:first-child a{
        border-radius: 4px 4px 0 0;
    }
    .navcustom li:last-child a{
        border-radius: 0 0 4px 4px;
    }
    .navcustom.affix{
        top: 30px; /* Set the top position of pinned element */
    }
   </style>
</head>

<body>

<ul id="myTab" class="nav nav-tabs">
   <li class="Tab"><a  id='Tab1' href="#Trend" data-toggle="tab">走势图</a></li>
   <li class="Tab"><a href="#DetailTable" data-toggle="tab">明细表</a></li>
   <li class="Tab"><a href="#Table" data-toggle="tab">汇总表</a></li>
       <li class="Tab dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            说明书<b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
           <li><a data-toggle="modal" href="#notice1">发车及时性</a></li>
           <li class="divider"></li>
           <li><a data-toggle="modal" href="#notice2">到达及时性</a></li>
           <li class="divider"></li>
           <li><a data-toggle="modal" href="#notice3">运行及时性</a></li>
        </ul>
    </li>
</ul>

<div id="myTabContent" class="tab-content">
   <div class="tab-pane fade in active" id="Trend">
      <div class="btn-group" data-toggle="buttons" style="padding:5px;">
         <label class="btn btn-primary" id='send' onclick='Repainting(1,1)'>
            <input type="radio" name="options" id="option1">发车及时率
         </label>
         <label class="btn btn-primary" id='reach' onclick='Repainting(2,1)'>
            <input type="radio" name="options" id="option2">到达及时率
         </label>
         <label class="btn btn-primary" id='trans' onclick='Repainting(3,1)'>
            <input type="radio" name="options" id="option3">运行及时率
         </label>
         <label class="btn btn-primary" id='trans' onclick='Repainting(4,1)'>
            <input type="radio" name="options" id="option3">提前发车10分钟
         </label>
         <label class="btn btn-primary" id='trans' onclick='Repainting(5,1)'>
            <input type="radio" name="options" id="option3">提前发车20分钟
         </label>
         <label class="btn btn-primary" id='trans' onclick='Repainting(6,1)'>
            <input type="radio" name="options" id="option3">延迟发车0~10分钟
         </label>
         <label class="btn btn-primary" id='trans' onclick='Repainting(7,1)'>
            <input type="radio" name="options" id="option3">延迟发车10分钟以上
         </label>
      </div>  
      <select id="CenterSelect" onchange="Painting()"></select>&nbsp;
      <div id='TrendCanvas' style="height:640px;"></div>
   </div>

   <div class="tab-pane fade" id="DetailTable">
    <div class="btn-group" data-toggle="buttons" style="padding:5px;">
         <label class="btn btn-primary" id='send' onclick='Repainting(1,2)'>
            <input type="radio" name="options" id="option4">发车及时率
         </label>
         <label class="btn btn-primary" id='reach' onclick='Repainting(2,2)'>
            <input type="radio" name="options" id="option5">到达及时率
         </label>
         <label class="btn btn-primary" id='trans' onclick='Repainting(3,2)'>
            <input type="radio" name="options" id="option6">运行及时率
         </label>
      </div>
      <button type="button" onclick="MyScreen('tabledetail','CBtn')" id="CBtn" class="btn btn-success">双击复制</button>
      <table id='tabledetail' class="table">
         <tbody>
         </tbody>
      </table>
 </div>

   <div class="tab-pane fade" id="Table">
    <div class="col-xs-2">
      <button type="button" onclick="MyScreen('tablesummary','CBtn2')" id="CBtn2" class="btn btn-success">双击复制</button>
        <ul id='nav' class="navcustom nav nav-tabs nav-stacked" data-spy="affix" data-offset-top="80">
        </ul>
    </div>
    <div class="col-xs-9">
      <table id='tablesummary' class="table table-hover">
       <thead>
          <tr>
             <th>名称</th>
             <th>发车总次数</th>
             <th>未及时发车</th>
             <th>发车及时率</th>
             <th>未及时到达</th>
             <th>到达及时率</th>
             <th>运行时效未达成</th>
             <th>运行时效达成率</th>
          </tr>
       </thead>
       <tbody>
       </tbody>
    </table>
  </div>
   </div>
  
      <div class="modal fade" id="notice1" tabindex="-1" role="dialog" 
       aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" 
                    data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                    发车及时性说明
                    </h4>
                </div>
                <div class="modal-body">
                <dl>
                    <dt>取值逻辑</dt>
                    <dd>1 根据当天的实际发车时间，寻找其对应计划发车时间。</dd>
                    <dd>2 若实际发车时间晚于计划发车时间10分钟，则未及时发车，反之及时</dd>
                    <dt>时间节点</dt>
                    <dd>- 查询起始日期16:00至查询结束日期次日16:00</dd>
                    <dd>- 按实际发车时间计</dd>
                    <dt>注意事项</dt>
                    <dd>- 汇总表、明细表中的数据以出发分拨或分公司为归集主体</dd>
                    <dd>- 延误10分钟以内予以免除</dd>
                </dl>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" 
                    data-dismiss="modal">     
                    我知道了
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="notice2" tabindex="-2" role="dialog" 
       aria-labelledby="myModalLabel2" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" 
                    data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel2">
                    到达及时性说明
                    </h4>
                </div>
                <div class="modal-body">
                <dl>
                    <dt>取值逻辑</dt>
                    <dd>1 根据当天的实际到达时间，寻找其对应计划到达时间。</dd>
                    <dd>2 若实际到达时间晚于计划到达时间10分钟，则未及时到达，反之及时</dd>
                    <dt>时间节点</dt>
                    <dd>- 查询起始日期16:00至查询结束日期次日16:00</dd>
                    <dd>- 按实际发车时间计</dd>
                    <dt>注意事项</dt>
                    <dd>- 汇总表、明细表中的数据以出发分拨或分公司为归集主体</dd>
                    <dd>- 延误10分钟以内予以免除</dd>
                </dl>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" 
                    data-dismiss="modal">     
                    我知道了
                    </button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="notice3" tabindex="-3" role="dialog" 
       aria-labelledby="myModalLabel3" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" 
                    data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel3">
                    运行及时性说明
                    </h4>
                </div>
                <div class="modal-body">
                <dl>
                    <dt>取值逻辑</dt>
                    <dd>1 根据当天的实际发车和到达时间，寻找其对应计划发车和到达时间。</dd>
                    <dd>2 若实际到达时间与实际发车时间之差大于计划到达时间与实际到达时间之差，则运行时效未达成，反之达成</dd>
                    <dt>时间节点</dt>
                    <dd>- 查询起始日期16:00至查询结束日期次日16:00</dd>
                    <dd>- 按实际发车时间计</dd>
                    <dt>注意事项</dt>
                    <dd>- 汇总表、明细表中的数据以出发分拨或分公司为归集主体</dd>
                    <dd>- 延误10分钟以内予以免除</dd>
                </dl>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" 
                    data-dismiss="modal">     
                    我知道了
                    </button>
                </div>
            </div>
        </div>
    </div>



</div>

</body>
</html>         