<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>全网装载率快速查询</title>

    <link rel="stylesheet" type="text/css" href="../../dm/common.css">
    <script src="../../tools/jquery/jquery-2.1.3.min.js"></script>
    <script src="../../tools/echarts-2.0.4/echarts-plain.js"></script>

    <script src="../../framework/core.js"></script>
    <script src="../../framework/ajax.js"></script>
    <script src="../../dm/common.js"></script>

    <script type="text/javascript">
    window.onload = function() {
        var originData = window.parent.globalValiable.data,
            canvas = document.getElementById('TrendCanvas');
        
        canvas.style.height = (screen.height - 180) + 'px';
        Trend(originData);
    }
        
    function Trend(originData){
        var DayList = [],Rate = [],
            min = 100,max = 0;

        for(var i = 0; i < originData.length; i++){
            var r = originData[i]["r"];

            DayList.push(originData[i]["t"]);
            Rate.push(r);

            if(r > max){max = r;}
            if(r < min){min = r;}
        }

        min = Math.floor(min/10)*10;
        max = Math.ceil(max/10)*10;

        var myChart = echarts.init(document.getElementById('TrendCanvas'));
//////////////////////////////////////////////OPTION
var option = {
    backgroundColor:'#fff',
    tooltip : {
        trigger: 'axis',
        axisPointer:{type : 'none'},
        textStyle:{fontSize:'16',color:'#fff',fontFamily:'Microsoft YaHei'},
        formatter:function(d){
            if(d[0][2] != '-'){
                return d[0][1].substr(d[0][1].indexOf('-') + 1) + '</br>' + d[0][2] + '%';
            }
            else{
                return d[0][1].substr(d[0][1].indexOf('-') + 1) + '</br>' + '-';
            }
        }
    },
    calculable : true,
    xAxis : [
        {
            type : 'category',
            axisLine:{lineStyle:{color:'#999'}},
            boundaryGap : false,
            axisLabel:{
                rotate:-30,
                interval:0,
                textStyle:{color:'#999',fontSize:'16'}
            },
            data : DayList
        }
    ],
    yAxis : [
        {
            name:'百分比',
            nameTextStyle:{
                fontSize:'18',
                fontFamily:'Microsoft YaHei'
            },
            type : 'value',
            axisLine:{lineStyle:{color:'#999'}},
            axisLabel:{textStyle:{color:'#999',fontSize:'16'}},
            min:min,
            max:max
        }
    ],
    series :[
        {
            name:'装载率',
            type:'line',
            data:Rate,
            smooth:true,
            symbol:'none',
            itemStyle: {                // 系列级个性化
                normal: {
                    color: '#337AB7',
                    width: 3
                }
            },
            markPoint : {
                symbol:"heart",
                data : [
                    {type : 'max', name: '最大值'}
                ],
                itemStyle:{
                    normal : {
                        color:'#337AB7'
                    },
                    emphasis: {
                    color: '#F39B9C',
                    label : {
                        show: true,
                        position: 'inside',
                        textStyle : {
                            color:'#000',
                            fontSize : '14'
                        }
                    }                
                }
                }
            }
        }
    ]
};            
        myChart.setOption(option);
    }
    </script>
</head>

<body>
    <div id='TrendCanvas' style="height:640px;"></div>
</body>
</html>